/*! httpinvoke 2013-12-10 */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.httpinvoke=b()}(this,function(){"use strict";var a;a=window;var b,c,d,e=0,f=1,g=2,h=function(a,b){a&&a.then&&a.then(function(){b[e].apply(null,arguments)},function(){b[f].apply(null,arguments)},function(){b[g].apply(null,arguments)})},i=a.process&&a.process.nextTick||a.setImmediate||a.setTimeout,j=function(a){var b,c=[],d=g,k=function(e){a[e]=function(a){var i,j;if(c){for(b=a,d=e,i=0;i<c.length;i++)if("function"==typeof c[i][d])try{j=c[i][d].call(null,b),g>d&&h(j,c[i]._)}catch(k){c[i]._[f](k)}else g>d&&c[i]._[d](b);g>d&&(c=null)}}};return k(g),k(e),k(f),a.then=function(){var a=[].slice.call(arguments);return a._=j({}),c?c.push(a):"function"==typeof a[d]&&i(function(){h(a[d](b),a._)}),a._},a},k=function(b){return"object"==typeof b&&null!==b&&(a.ArrayBufferView&&b instanceof ArrayBufferView||a.Int8Array&&b instanceof Int8Array||a.Uint8Array&&b instanceof Uint8Array||a.Uint8ClampedArray&&b instanceof Uint8ClampedArray||a.Int16Array&&b instanceof Int16Array||a.Uint16Array&&b instanceof Uint16Array||a.Int32Array&&b instanceof Int32Array||a.Uint32Array&&b instanceof Uint32Array||a.Float32Array&&b instanceof Float32Array||a.Float64Array&&b instanceof Float64Array)},l=function(a){return"[object Array]"===Object.prototype.toString.call(a)},m=function(b){return"object"==typeof b&&null!==b&&a.FormData&&b instanceof a.FormData},n=function(b){return"object"==typeof b&&null!==b&&(a.Buffer&&b instanceof Buffer||a.Blob&&b instanceof Blob||a.File&&b instanceof File||a.ArrayBuffer&&b instanceof ArrayBuffer||k(b)||l(b))},o="an instance of Buffer, nor Blob, nor File, nor ArrayBuffer, nor ArrayBufferView, nor Int8Array, nor Uint8Array, nor Uint8ClampedArray, nor Int16Array, nor Uint16Array, nor Int32Array, nor Uint32Array, nor Float32Array, nor Float64Array, nor Array",p=",GET,HEAD,PATCH,POST,PUT,DELETE,",q=function(a){return a},r=function(){for(var a=arguments.length,b={};a--;)for(var c=arguments[a].split(","),d=c.length;d--;)b[c[d]]=100*(a+1)+d;return b}("Continue,Switching Protocols","OK,Created,Accepted,Non-Authoritative Information,No Content,Reset Content,Partial Content","Multiple Choices,Moved Permanently,Found,See Other,Not Modified,Use Proxy,_,Temporary Redirect","Bad Request,Unauthorized,Payment Required,Forbidden,Not Found,Method Not Allowed,Not Acceptable,Proxy Authentication Required,Request Timeout,Conflict,Gone,Length Required,Precondition Failed,Request Entity Too Large,Request-URI Too Long,Unsupported Media Type,Requested Range Not Satisfiable,Expectation Failed","Internal Server Error,Not Implemented,Bad Gateway,Service Unavailable,Gateway Time-out,HTTP Version Not Supported"),s=a.Uint8Array?function(a){return new Uint8Array(a)}:q,t=function(a,b){for(var c=b.length;c<a.length;)b.push(255&a.charCodeAt(c++));return b},u=function(a){for(var b,c=0,d=a.length;d--;)b=a.charCodeAt(d),c+=128>b?1:2048>b?2:3;return c};try{execScript("Function httpinvoke0(B,A,C)\r\nDim i\r\nFor i=C to LenB(B)\r\nA.push(AscB(MidB(B,i,1)))\r\nNext\r\nEnd Function\r\nFunction httpinvoke1(B)\r\nhttpinvoke1=LenB(B)\r\nEnd Function","vbscript"),c=function(a,b){return httpinvoke0(a,b,b.length+1),b},d=function(a){return httpinvoke1(a)}}catch(v){}var w,x=function(a,b){return"responseBody"in a&&c?c(a.responseBody,b):t(a.responseText,b)},y=function(a){return"responseBody"in a&&d?d(a.responseBody):a.responseText.length},z=function(a,b){for(var c,d=a.getAllResponseHeaders().split(/\r?\n/),e=!1,f=d.length;f--;)(c=d[f].indexOf(":"))>=0&&(b[d[f].substr(0,c).toLowerCase()]=d[f].substr(c+2),e=!0);return e},A=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,B=function(a,b){return b=A.exec(b.toLowerCase()),a=A.exec(a.toLowerCase())||[],!(!b||b[1]===a[1]&&b[2]===a[2]&&(b[3]||("http:"===b[1]?"80":"443"))===(a[3]||("http:"===a[1]?"80":"443")))},C=function(c,h,v,A){var D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T;h?v?A?v.finished=A:"object"==typeof h?(h.finished=v,v=h,h="GET"):"function"==typeof v&&(v={finished:v}):"string"==typeof h?v={}:"object"==typeof h?(v=h,h="GET"):(v={finished:h},h="GET"):(h="GET",v={});var U=function(a,b,c){return function(d,e,f,g){b(d,e,f,g);try{v[a](d,e,f,g)}catch(h){}c(d,e,f,g)}};E=function(a,b){return i(function(){null!==a&&a(b)}),D=function(){},j(D)},F=U("uploading",q,function(a,b){D[g]({type:"upload",current:a,total:b})}),G=U("downloading",q,function(a,b,c){D[g]({type:"download",current:a,total:b,partial:c})}),J=U("gotStatus",function(){J=null,R&&setTimeout(function(){A&&(A(new Error("download timeout")),D())},R)},function(a,b){D[g]({type:"headers",statusCode:a,headers:b})}),A=U("finished",function(){A=null,D()},function(a,b,c,d){return a?D[f](a):(D[e]({body:b,statusCode:c,headers:d}),void 0)});var V,W=v.converters||{};I=v.headers||{},K={},L=v.corsExposedHeaders||[],L.push.apply(L,["Cache-Control","Content-Language","Content-Type","Content-Length","Expires","Last-Modified","Pragma","Content-Range","Content-Encoding"]);var X=v.partialOutputMode||"disabled";if(X.indexOf(",")>=0||",disabled,chunked,joined,".indexOf(","+X+",")<0)return E(A,new Error('Option "partialOutputMode" is neither "disabled", nor "chunked", nor "joined"'));if(h.indexOf(",")>=0||p.indexOf(","+h+",")<0)return E(A,new Error("Unsupported method "+h));var Y=v.outputType;if(N="bytearray"===Y,!Y||"text"===Y||N)Q=q;else if(W["text "+Y])Q=W["text "+Y],N=!1;else{if(!W["bytearray "+Y])return E(A,new Error("Unsupported outputType "+Y));Q=W["bytearray "+Y],N=!0}V=q;var Z=v.inputType;if(O=v.input,O!==b){if(Z&&"auto"!==Z)if("text"===Z){if("string"!=typeof O)return E(A,new Error("inputType is text, but input is not a string"))}else if("formdata"===Z){if(!m(O))return E(A,new Error("inputType is formdata, but input is not an instance of FormData"))}else if("bytearray"===Z){if(!n(O))return E(A,new Error("inputType is bytearray, but input is neither "+o))}else if(W[Z+" text"])V=W[Z+" text"];else if(W[Z+" bytearray"])V=W[Z+" bytearray"];else{if(!W[Z+" formdata"])return E(A,new Error("There is no converter for specified inputType"));V=W[Z+" formdata"]}else if("string"!=typeof O&&!n(O)&&!m(O))return E(A,new Error("inputType is undefined or auto and input is neither string, nor FormData, nor "+o));"object"!=typeof O||m(O)||(a.ArrayBuffer&&O instanceof a.ArrayBuffer?O=new a.Uint8Array(O):k(O)&&(O=new a.Uint8Array(O.buffer,O.byteOffset,O.byteLength)));try{O=V(O)}catch($){return E(A,$)}}else{if(Z&&"auto"!==Z)return E(A,new Error('"input" is undefined, but inputType is defined'));if(I["Content-Type"])return E(A,new Error('"input" is undefined, but Content-Type request header is defined'))}var _=function(a){return a>0&&1073741824>a},ab=v.timeout;if(ab!==b)if("number"==typeof ab&&_(ab))T=ab;else{if(!(l(ab)&&2===ab.length&&_(ab[0])&&_(ab[1])))return E(A,new Error('"timeout" value is not valid'));C.corsFineGrainedTimeouts||!fb?(S=ab[0],R=ab[1]):T=ab[0]+ab[1]}S&&setTimeout(function(){J&&(A(new Error("upload timeout")),D())},S),T&&setTimeout(function(){A&&(A(new Error("timeout")),D())},T);var bb,cb,db,eb,fb,gb=!1,hb=0,ib="disabled"===X?b:N?[]:"",jb=ib,kb=function(){"disabled"!==X&&(N?x(bb,ib):ib=bb.responseText,jb="joined"===X?ib:ib.slice(hb),hb=ib.length)},lb=function(a){F&&(gb||(gb=!0,F(0,H),A))&&(F(a,H),a===H&&(F=null))};try{eb=location.href}catch(mb){eb=document.createElement("a"),eb.href="",eb=eb.href}if(fb=B(eb,c),"object"==typeof O&&!m(O)&&C.requestTextOnly)return E(A,new Error("bytearray inputType is not supported on this platform, please always test using requestTextOnly feature flag - hint - you may want to try sending FormData (formdata type)"));if(fb&&!C.cors)return E(A,new Error("Cross-origin requests are not supported"));for(db=["DELETE","PATCH","PUT","HEAD"],cb=db.length;cb-->0;)if(fb&&h===db[cb]&&!C["cors"+db[cb]])return E(A,new Error(db[cb]+" method in cross-origin requests is not supported in this browser"));if("PATCH"===h&&!C.PATCH)return E(A,new Error("PATCH method is not supported in this browser"));if(!w)return E(A,new Error("unable to construct XMLHttpRequest object"));bb=w(fb);try{bb.open(h,c,!0)}catch(nb){return E(A,nb)}v.corsCredentials&&C.corsCredentials&&"boolean"==typeof bb.withCredentials&&(bb.withCredentials=!0),fb&&v.corsOriginHeader&&(I[v.corsOriginHeader]=location.protocol+"//"+location.host);var ob=function(a){A&&a.lengthComputable&&(H===b&&(H=a.total||a.totalSize||0,lb(0)),lb(a.loaded||a.position||0))};"upload"in bb?(bb.upload.onerror=function(){rb.error=!0,A&&A(new Error("network error"))},bb.upload.onprogress=ob):"onuploadprogress"in bb&&(bb.onuploadprogress=ob),"onerror"in bb&&(bb.onerror=function(){rb.error=!0,ub()});var pb=function(a){tb(!1);try{var b=a.loaded||a.position||0;a.lengthComputable&&(P=a.total||a.totalSize||0),A&&P>=b&&!J&&(kb(),G(b,P,jb))}catch(c){}};"onloadstart"in bb&&(bb.onloadstart=pb),"onloadend"in bb&&(bb.onloadend=pb),"onprogress"in bb&&(bb.onprogress=pb);var qb,rb={},sb=function(a){try{bb.status&&(rb.status=!0)}catch(c){}try{bb.statusText&&(rb.status=!0)}catch(c){}try{bb.responseText&&(rb.entity=!0)}catch(c){}try{bb.response&&(rb.entity=!0)}catch(c){}try{d(bb.responseBody)&&(rb.entity=!0)}catch(c){}if(J&&(rb.status||rb.entity||rb.success||a)){"string"==typeof bb.contentType&&bb.contentType&&("text/html"!==bb.contentType||""!==bb.responseText)&&(K["content-type"]=bb.contentType,rb.headers=!0);for(var e=0;e<L.length;e++){var f;try{(f=bb.getResponseHeader(L[e]))&&(K[L[e].toLowerCase()]=f,rb.headers=!0)}catch(g){}}try{z(bb,K)&&(rb.headers=!0)}catch(g){}if(qb="identity"===K["content-encoding"]||!fb&&!K["content-encoding"],qb&&"content-length"in K&&(P=Number(K["content-length"])),!M&&(!fb||C.corsStatus)){try{bb.status&&(M=bb.status)}catch(c){}if(!M)try{M=r[bb.statusText]}catch(c){}1223===M&&(M=204),M>=12001&&12156>=M&&(M=b)}}},tb=function(a){return A&&(a||sb(!1),J&&(a||rb.status&&rb.headers)&&(H===b&&(H=0,lb(0)),lb(H),A&&(J(M,K),A&&(G(0,P,jb),A))))?"HEAD"===h?(G(0,0,jb),A&&A(null,b,M,K)):void 0:void 0},ub=function(){if(A){sb(!0);var a;try{a="disabled"!==X?y(bb):N?"response"in bb?bb.response?bb.response.byteLength:0:y(bb):u(bb.responseText)}catch(c){a=0}if(P!==b){if(qb){if(a!==P&&"HEAD"!==h)return A(new Error("network error"))}else if(rb.error)return A(new Error("network error"))}else P=a;var d=!rb.entity&&0===P&&K["content-type"]===b;if(d&&200===M||!rb.success&&!M&&(rb.error||"onreadystatechange"in bb&&!rb.readyStateLOADING))return A(new Error("network error"));if(tb(!0),A){if(d)return G(0,0,jb),A(null,b,M,K);if(kb(),G(P,P,jb),A)try{A(null,Q(ib||(N?s("response"in bb?bb.response||[]:x(bb,[])):bb.responseText)),M,K)}catch(e){A(e)}}}},vb="onload"in bb;if(vb&&(bb.onload=function(){rb.success=!0,ub()}),"onreadystatechange"in bb&&(bb.onreadystatechange=function(){2===bb.readyState?tb(!1):3===bb.readyState?(rb.readyStateLOADING=!0,tb(!1)):4!==bb.readyState||vb||ub()}),!fb||C.corsRequestHeaders)for(var wb in I)if(I.hasOwnProperty(wb))try{bb.setRequestHeader(wb,I[wb])}catch($){return E(A,$)}return i(function(){if(A){if(N)try{"disabled"===X&&"response"in bb?bb.responseType="arraybuffer":bb.overrideMimeType("text/plain; charset=x-user-defined")}catch(b){}if(m(O))try{bb.send(O)}catch(c){return E(A,new Error("Unable to send"))}else if("object"==typeof O){var d=!1,e=!1,f=!1,g=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;l(O)&&(O=a.Uint8Array?new Uint8Array(O):String.fromCharCode.apply(String,O));var h=g?function(){var a=new g;a.append(O),O=a.getBlob(I["Content-Type"]||"application/octet-stream")}:function(){try{O=new Blob([O],{type:I["Content-Type"]||"application/octet-stream"})}catch(a){e=!0}},j=function(){var b;if(e&&d&&f)return E(A,new Error("Unable to send"));if(k(O))if(d)if(f)e||h();else try{O=String.fromCharCode.apply(String,O)}catch(c){f=!0}else{H=O.byteLength;try{return bb.send(a.ArrayBufferView?O:0===O.byteOffset&&O.length===O.buffer.byteLength?O.buffer:O.buffer.slice?O.buffer.slice(O.byteOffset,O.byteOffset+O.length):new Uint8Array([].slice.call(new Uint8Array(O.buffer),O.byteOffset,O.byteOffset+O.length)).buffer),void 0}catch(c){}d=!0}else if(a.Blob&&O instanceof Blob)if(e)if(d){if(!f)try{return b=new FileReader,b.onerror=function(){f=!0,j()},b.onload=function(){O=b.result,j()},b.readAsBinaryString(O),void 0}catch(c){f=!0}}else try{return b=new FileReader,b.onerror=function(){d=!0,j()},b.onload=function(){try{O=new Uint8Array(b.result)}catch(a){d=!0}j()},b.readAsArrayBuffer(O),void 0}catch(c){d=!0}else try{return H=O.size,bb.send(O),void 0}catch(c){e=!0}else if(f)if(d)e||h();else try{O=t(O,[])}catch(c){d=!0}else try{return H=O.length,bb.sendAsBinary(O),void 0}catch(c){f=!0}i(j)};j(),lb(0)}else{try{"string"==typeof O?(H=u(O),bb.send(O)):(H=0,bb.send(null))}catch(c){return E(A,new Error("Unable to send"))}lb(0)}}}),D=function(){A&&A(new Error("abort"));try{bb.abort()}catch(a){}},j(D)};return C.corsResponseContentTypeOnly=!1,C.corsRequestHeaders=!1,C.corsCredentials=!1,C.cors=!1,C.corsDELETE=!1,C.corsHEAD=!1,C.corsPATCH=!1,C.corsPUT=!1,C.corsStatus=!1,C.corsResponseTextOnly=!1,C.corsFineGrainedTimeouts=!0,C.requestTextOnly=!1,function(){try{w=function(){return new XMLHttpRequest};var c=w();if(C.requestTextOnly=!a.Uint8Array&&!c.sendAsBinary,C.cors="withCredentials"in c,C.cors)return C.corsRequestHeaders=!0,C.corsCredentials=!0,C.corsDELETE=!0,C.corsPATCH=!0,C.corsPUT=!0,C.corsHEAD=!0,C.corsStatus=!0,void 0}catch(d){}try{return a.XDomainRequest===b?(w=function(){return new XMLHttpRequest},w()):(w=function(a){return a?new XDomainRequest:new XMLHttpRequest},w(!0),C.cors=!0,C.corsResponseContentTypeOnly=!0,C.corsResponseTextOnly=!0,C.corsFineGrainedTimeouts=!1),void 0}catch(d){}try{return w(),void 0}catch(d){}for(var e=["Microsoft.XMLHTTP","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],f=e.length;f--;)try{return w=function(){return new ActiveXObject(e[f])},w(),C.requestTextOnly=!0,void 0}catch(d){}w=b}(),C.PATCH=!!function(){try{return w().open("PATCH",location.href,!0),1}catch(a){}}(),C});