/*! httpinvoke 2013-12-10 */
!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.httpinvoke=b()}(this,function(){"use strict";var a;a=window;var b,c,d,e=0,f=1,g=2,h=function(a,b){a&&a.then&&a.then(function(){b[e].apply(null,arguments)},function(){b[f].apply(null,arguments)},function(){b[g].apply(null,arguments)})},i=a.process&&a.process.nextTick||a.setImmediate||a.setTimeout,j=function(a){var b,c=[],d=g,k=function(e){a[e]=function(a){var i,j;if(c){for(b=a,d=e,i=0;i<c.length;i++)if("function"==typeof c[i][d])try{j=c[i][d].call(null,b),g>d&&h(j,c[i]._)}catch(k){c[i]._[f](k)}else g>d&&c[i]._[d](b);g>d&&(c=null)}}};return k(g),k(e),k(f),a.then=function(){var a=[].slice.call(arguments);return a._=j({}),c?c.push(a):"function"==typeof a[d]&&i(function(){h(a[d](b),a._)}),a._},a},k=function(b){return"object"==typeof b&&null!==b&&(a.ArrayBufferView&&b instanceof ArrayBufferView||a.Int8Array&&b instanceof Int8Array||a.Uint8Array&&b instanceof Uint8Array||a.Uint8ClampedArray&&b instanceof Uint8ClampedArray||a.Int16Array&&b instanceof Int16Array||a.Uint16Array&&b instanceof Uint16Array||a.Int32Array&&b instanceof Int32Array||a.Uint32Array&&b instanceof Uint32Array||a.Float32Array&&b instanceof Float32Array||a.Float64Array&&b instanceof Float64Array)},l=function(a){return"[object Array]"===Object.prototype.toString.call(a)},m=function(b){return"object"==typeof b&&null!==b&&a.FormData&&b instanceof a.FormData},n=function(b){return"object"==typeof b&&null!==b&&(a.Buffer&&b instanceof Buffer||a.Blob&&b instanceof Blob||a.File&&b instanceof File||a.ArrayBuffer&&b instanceof ArrayBuffer||k(b)||l(b))},o=",GET,HEAD,PATCH,POST,PUT,DELETE,",p=function(a){return a},q=function(){for(var a=arguments.length,b={};a--;)for(var c=arguments[a].split(","),d=c.length;d--;)b[c[d]]=100*(a+1)+d;return b}("Continue,Switching Protocols","OK,Created,Accepted,Non-Authoritative Information,No Content,Reset Content,Partial Content","Multiple Choices,Moved Permanently,Found,See Other,Not Modified,Use Proxy,_,Temporary Redirect","Bad Request,Unauthorized,Payment Required,Forbidden,Not Found,Method Not Allowed,Not Acceptable,Proxy Authentication Required,Request Timeout,Conflict,Gone,Length Required,Precondition Failed,Request Entity Too Large,Request-URI Too Long,Unsupported Media Type,Requested Range Not Satisfiable,Expectation Failed","Internal Server Error,Not Implemented,Bad Gateway,Service Unavailable,Gateway Time-out,HTTP Version Not Supported"),r=a.Uint8Array?function(a){return new Uint8Array(a)}:p,s=function(a,b){for(var c=b.length;c<a.length;)b.push(255&a.charCodeAt(c++));return b},t=function(a){for(var b,c=0,d=a.length;d--;)b=a.charCodeAt(d),c+=128>b?1:2048>b?2:3;return c};try{execScript("Function httpinvoke0(B,A,C)\r\nDim i\r\nFor i=C to LenB(B)\r\nA.push(AscB(MidB(B,i,1)))\r\nNext\r\nEnd Function\r\nFunction httpinvoke1(B)\r\nhttpinvoke1=LenB(B)\r\nEnd Function","vbscript"),c=function(a,b){return httpinvoke0(a,b,b.length+1),b},d=function(a){return httpinvoke1(a)}}catch(u){}var v,w=function(a,b){return"responseBody"in a&&c?c(a.responseBody,b):s(a.responseText,b)},x=function(a){return"responseBody"in a&&d?d(a.responseBody):a.responseText.length},y=function(a,b){for(var c,d=a.getAllResponseHeaders().split(/\r?\n/),e=!1,f=d.length;f--;)(c=d[f].indexOf(":"))>=0&&(b[d[f].substr(0,c).toLowerCase()]=d[f].substr(c+2),e=!0);return e},z=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,A=function(a,b){return b=z.exec(b.toLowerCase()),a=z.exec(a.toLowerCase())||[],!(!b||b[1]===a[1]&&b[2]===a[2]&&(b[3]||("http:"===b[1]?"80":"443"))===(a[3]||("http:"===a[1]?"80":"443")))},B=function(c,h,u,z){var C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S;h?u?z?u.finished=z:"object"==typeof h?(h.finished=u,u=h,h="GET"):"function"==typeof u&&(u={finished:u}):"string"==typeof h?u={}:"object"==typeof h?(u=h,h="GET"):(u={finished:h},h="GET"):(h="GET",u={});var T=function(a,b,c){return function(d,e,f,g){b(d,e,f,g);try{u[a](d,e,f,g)}catch(h){}c(d,e,f,g)}};D=function(a,b){return b instanceof Error||(b=new Error("Error code #"+b+". See https://github.com/jakutis/httpinvoke#error-codes")),i(function(){null!==a&&a(b)}),C=function(){},j(C)},E=T("uploading",p,function(a,b){C[g]({type:"upload",current:a,total:b})}),F=T("downloading",p,function(a,b,c){C[g]({type:"download",current:a,total:b,partial:c})}),I=T("gotStatus",function(){I=null,Q&&setTimeout(function(){z&&(z(new Error("download timeout")),C())},Q)},function(a,b){C[g]({type:"headers",statusCode:a,headers:b})}),z=T("finished",function(){z=null,C()},function(a,b,c,d){return a?C[f](a):(C[e]({body:b,statusCode:c,headers:d}),void 0)});var U,V=u.converters||{};H=u.headers||{},J={},K=u.corsExposedHeaders||[],K.push.apply(K,["Cache-Control","Content-Language","Content-Type","Content-Length","Expires","Last-Modified","Pragma","Content-Range","Content-Encoding"]);var W=u.partialOutputMode||"disabled";if(W.indexOf(",")>=0||",disabled,chunked,joined,".indexOf(","+W+",")<0)return D(z,[3]);if(h.indexOf(",")>=0||o.indexOf(","+h+",")<0)return D(z,[4,h]);var X=u.outputType;if(M="bytearray"===X,!X||"text"===X||M)P=p;else if(V["text "+X])P=V["text "+X],M=!1;else{if(!V["bytearray "+X])return D(z,[5,X]);P=V["bytearray "+X],M=!0}U=p;var Y=u.inputType;if(N=u.input,N!==b){if(Y&&"auto"!==Y)if("text"===Y){if("string"!=typeof N)return D(z,[7])}else if("formdata"===Y){if(!m(N))return D(z,[8])}else if("bytearray"===Y){if(!n(N))return D(z,[9])}else if(V[Y+" text"])U=V[Y+" text"];else if(V[Y+" bytearray"])U=V[Y+" bytearray"];else{if(!V[Y+" formdata"])return D(z,[10,Y]);U=V[Y+" formdata"]}else if("string"!=typeof N&&!n(N)&&!m(N))return D(z,[6]);"object"!=typeof N||m(N)||(a.ArrayBuffer&&N instanceof a.ArrayBuffer?N=new a.Uint8Array(N):k(N)&&(N=new a.Uint8Array(N.buffer,N.byteOffset,N.byteLength)));try{N=U(N)}catch(Z){return D(z,Z)}}else{if(Y&&"auto"!==Y)return D(z,[11]);if(H["Content-Type"])return D(z,[12])}var $=function(a){return a>0&&1073741824>a},_=u.timeout;if(_!==b)if("number"==typeof _&&$(_))S=_;else{if(!(l(_)&&2===_.length&&$(_[0])&&$(_[1])))return D(z,[13]);B.corsFineGrainedTimeouts||!eb?(R=_[0],Q=_[1]):S=_[0]+_[1]}R&&setTimeout(function(){I&&(z(new Error("upload timeout")),C())},R),S&&setTimeout(function(){z&&(z(new Error("timeout")),C())},S);var ab,bb,cb,db,eb,fb=!1,gb=0,hb="disabled"===W?b:M?[]:"",ib=hb,jb=function(){"disabled"!==W&&(M?w(ab,hb):hb=ab.responseText,ib="joined"===W?hb:hb.slice(gb),gb=hb.length)},kb=function(a){E&&(fb||(fb=!0,E(0,G),z))&&(E(a,G),a===G&&(E=null))};try{db=location.href}catch(lb){db=document.createElement("a"),db.href="",db=db.href}if(eb=A(db,c),"object"==typeof N&&!m(N)&&B.requestTextOnly)return D(z,[17]);if(eb&&!B.cors)return D(z,[18]);for(cb=["DELETE","PATCH","PUT","HEAD"],bb=cb.length;bb-->0;)if(eb&&h===cb[bb]&&!B["cors"+cb[bb]])return D(z,[19,h]);if("PATCH"===h&&!B.PATCH)return D(z,[20]);if(!v)return D(z,[21]);ab=v(eb);try{ab.open(h,c,!0)}catch(mb){return D(z,[22,c])}u.corsCredentials&&B.corsCredentials&&"boolean"==typeof ab.withCredentials&&(ab.withCredentials=!0),eb&&u.corsOriginHeader&&(H[u.corsOriginHeader]=location.protocol+"//"+location.host);var nb=function(a){z&&a.lengthComputable&&(G===b&&(G=a.total||a.totalSize||0,kb(0)),kb(a.loaded||a.position||0))};"upload"in ab?(ab.upload.onerror=function(){qb.error=!0,z&&z(new Error("network error"))},ab.upload.onprogress=nb):"onuploadprogress"in ab&&(ab.onuploadprogress=nb),"onerror"in ab&&(ab.onerror=function(){qb.error=!0,tb()});var ob=function(a){sb(!1);try{var b=a.loaded||a.position||0;a.lengthComputable&&(O=a.total||a.totalSize||0),z&&O>=b&&!I&&(jb(),F(b,O,ib))}catch(c){}};"onloadstart"in ab&&(ab.onloadstart=ob),"onloadend"in ab&&(ab.onloadend=ob),"onprogress"in ab&&(ab.onprogress=ob);var pb,qb={},rb=function(a){try{ab.status&&(qb.status=!0)}catch(c){}try{ab.statusText&&(qb.status=!0)}catch(c){}try{ab.responseText&&(qb.entity=!0)}catch(c){}try{ab.response&&(qb.entity=!0)}catch(c){}try{d(ab.responseBody)&&(qb.entity=!0)}catch(c){}if(I&&(qb.status||qb.entity||qb.success||a)){"string"==typeof ab.contentType&&ab.contentType&&("text/html"!==ab.contentType||""!==ab.responseText)&&(J["content-type"]=ab.contentType,qb.headers=!0);for(var e=0;e<K.length;e++){var f;try{(f=ab.getResponseHeader(K[e]))&&(J[K[e].toLowerCase()]=f,qb.headers=!0)}catch(g){}}try{y(ab,J)&&(qb.headers=!0)}catch(g){}if(pb="identity"===J["content-encoding"]||!eb&&!J["content-encoding"],pb&&"content-length"in J&&(O=Number(J["content-length"])),!L&&(!eb||B.corsStatus)){try{ab.status&&(L=ab.status)}catch(c){}if(!L)try{L=q[ab.statusText]}catch(c){}1223===L&&(L=204),L>=12001&&12156>=L&&(L=b)}}},sb=function(a){return z&&(a||rb(!1),I&&(a||qb.status&&qb.headers)&&(G===b&&(G=0,kb(0)),kb(G),z&&(I(L,J),z&&(F(0,O,ib),z))))?"HEAD"===h?(F(0,0,ib),z&&z(null,b,L,J)):void 0:void 0},tb=function(){if(z){rb(!0);var a;try{a="disabled"!==W?x(ab):M?"response"in ab?ab.response?ab.response.byteLength:0:x(ab):t(ab.responseText)}catch(c){a=0}if(O!==b){if(pb){if(a!==O&&"HEAD"!==h)return z(new Error("network error"))}else if(qb.error)return z(new Error("network error"))}else O=a;var d=!qb.entity&&0===O&&J["content-type"]===b;if(d&&200===L||!qb.success&&!L&&(qb.error||"onreadystatechange"in ab&&!qb.readyStateLOADING))return z(new Error("network error"));if(sb(!0),z){if(d)return F(0,0,ib),z(null,b,L,J);if(jb(),F(O,O,ib),z)try{z(null,P(hb||(M?r("response"in ab?ab.response||[]:w(ab,[])):ab.responseText)),L,J)}catch(e){z(e)}}}},ub="onload"in ab;if(ub&&(ab.onload=function(){qb.success=!0,tb()}),"onreadystatechange"in ab&&(ab.onreadystatechange=function(){2===ab.readyState?sb(!1):3===ab.readyState?(qb.readyStateLOADING=!0,sb(!1)):4!==ab.readyState||ub||tb()}),!eb||B.corsRequestHeaders)for(var vb in H)if(H.hasOwnProperty(vb))try{ab.setRequestHeader(vb,H[vb])}catch(Z){return D(z,[23,vb])}return i(function(){if(z){if(M)try{"disabled"===W&&"response"in ab?ab.responseType="arraybuffer":ab.overrideMimeType("text/plain; charset=x-user-defined")}catch(b){}if(m(N))try{ab.send(N)}catch(c){return D(z,[24])}else if("object"==typeof N){var d=!1,e=!1,f=!1,g=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder;l(N)&&(N=a.Uint8Array?new Uint8Array(N):String.fromCharCode.apply(String,N));var h=g?function(){var a=new g;a.append(N),N=a.getBlob(H["Content-Type"]||"application/octet-stream")}:function(){try{N=new Blob([N],{type:H["Content-Type"]||"application/octet-stream"})}catch(a){e=!0}},j=function(){var b;if(e&&d&&f)return D(z,[24]);if(k(N))if(d)if(f)e||h();else try{N=String.fromCharCode.apply(String,N)}catch(c){f=!0}else{G=N.byteLength;try{return ab.send(a.ArrayBufferView?N:0===N.byteOffset&&N.length===N.buffer.byteLength?N.buffer:N.buffer.slice?N.buffer.slice(N.byteOffset,N.byteOffset+N.length):new Uint8Array([].slice.call(new Uint8Array(N.buffer),N.byteOffset,N.byteOffset+N.length)).buffer),void 0}catch(c){}d=!0}else if(a.Blob&&N instanceof Blob)if(e)if(d){if(!f)try{return b=new FileReader,b.onerror=function(){f=!0,j()},b.onload=function(){N=b.result,j()},b.readAsBinaryString(N),void 0}catch(c){f=!0}}else try{return b=new FileReader,b.onerror=function(){d=!0,j()},b.onload=function(){try{N=new Uint8Array(b.result)}catch(a){d=!0}j()},b.readAsArrayBuffer(N),void 0}catch(c){d=!0}else try{return G=N.size,ab.send(N),void 0}catch(c){e=!0}else if(f)if(d)e||h();else try{N=s(N,[])}catch(c){d=!0}else try{return G=N.length,ab.sendAsBinary(N),void 0}catch(c){f=!0}i(j)};j(),kb(0)}else{try{"string"==typeof N?(G=t(N),ab.send(N)):(G=0,ab.send(null))}catch(c){return D(z,[24])}kb(0)}}}),C=function(){z&&z(new Error("abort"));try{ab.abort()}catch(a){}},j(C)};return B.corsResponseContentTypeOnly=!1,B.corsRequestHeaders=!1,B.corsCredentials=!1,B.cors=!1,B.corsDELETE=!1,B.corsHEAD=!1,B.corsPATCH=!1,B.corsPUT=!1,B.corsStatus=!1,B.corsResponseTextOnly=!1,B.corsFineGrainedTimeouts=!0,B.requestTextOnly=!1,function(){try{v=function(){return new XMLHttpRequest};var c=v();if(B.requestTextOnly=!a.Uint8Array&&!c.sendAsBinary,B.cors="withCredentials"in c,B.cors)return B.corsRequestHeaders=!0,B.corsCredentials=!0,B.corsDELETE=!0,B.corsPATCH=!0,B.corsPUT=!0,B.corsHEAD=!0,B.corsStatus=!0,void 0}catch(d){}try{return a.XDomainRequest===b?(v=function(){return new XMLHttpRequest},v()):(v=function(a){return a?new XDomainRequest:new XMLHttpRequest},v(!0),B.cors=!0,B.corsResponseContentTypeOnly=!0,B.corsResponseTextOnly=!0,B.corsFineGrainedTimeouts=!1),void 0}catch(d){}try{return v(),void 0}catch(d){}for(var e=["Microsoft.XMLHTTP","Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Msxml2.XMLHTTP"],f=e.length;f--;)try{return v=function(){return new ActiveXObject(e[f])},v(),B.requestTextOnly=!0,void 0}catch(d){}v=b}(),B.PATCH=!!function(){try{return v().open("PATCH",location.href,!0),1}catch(a){}}(),B});